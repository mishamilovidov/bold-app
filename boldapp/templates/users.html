{% extends "main.html" %}
{% load static %}
{% block title %}
    Users
{% endblock %}
{% block pageheader %}
   <h3 class="box-title">
                Users
            </h3>
{% endblock %}
{% block breadcrumbs %}

{% endblock %}

{% block content %}
<div class="row">
<div class="col-md-12">
            {% if messages %}
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }} alert-dismissible">
                    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">Ã—</button>
                    {{ message }}
                  </div>
        {% endfor %}
        {% endif %}

<div class="box">
<div class="box-body">
<div class="row">
        <div class="col-md-12">


{% load widget_tweaks %}
    <div id="toolbar">
            <a href="/user/add/" class="btn btn-warning btn-sm">
                  <i class="fa fa-plus"></i> Add User</a>
        </div>
   <table id="table" data-toggle="table" data-toolbar="#toolbar" data-toolbar-align="right" data-search-align="left" data-pagination="true" data-search="true" data-page-size="10" class="table table-striped table-bordered table-hover">
    <thead>
    <tr style="cursor: pointer" title="Edit Employee">
        <th data-sortable="true">
            Username
        </th>
        <th data-sortable="true">
            Name
        </th>
        <th data-sortable="true">
            Email
        </th>

    </tr>
    </thead>

       {% for user in users %}
            <tr data-field = "{{ user.id }}" style="cursor: pointer;">
                <td>
                    {{ user.username }}
                </td>
                <td>
                    {{user.first_name}} {{user.last_name}}
                </td>
                <td>
                    {{user.email}}
                </td>
            </tr>
        {% endfor %}

    </table>
            </div>
    </div>
    </div>
    </div>
    </div>

{% endblock %}
{% block scriptblock %}
                        <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="{% static "bootstrap-table/bootstrap-table.css" %}">

<!-- Latest compiled and minified JavaScript -->
<script src="{% static "bootstrap-table/bootstrap-table.js" %}"></script>

<!-- Latest compiled and minified Locales -->
<script src="{% static "bootstrap-table/locale/bootstrap-table-en-US.js" %}"></script>

    <script type="text/javascript">
     $table = $('#table');
    $table.bootstrapTable({
        formatNoMatches: function () {
            return 'No users';
        }
    });
    $table.on("click-row.bs.table", function (field, value, row, $el) {
        window.location = '/user/' + value._data.field+ "/";
     });
    </script>
{% endblock %}
